{"version":3,"file":"commonHelpers.js","sources":["../src/js/pixabay-api.js","../src/js/render-functions.js","../src/main.js"],"sourcesContent":["import axios from 'axios';\n\nconst API_KEY = '43962344-60bb6936b0a285a198b0045a6';\nconst BASE_URL = 'https://pixabay.com/api/';\n\nexport async function fetchImg(searchQuery, page = 1, perPage = 15) {\n  const params = new URLSearchParams({\n    key: API_KEY,\n    q: searchQuery,\n    image_type: 'photo',\n    orientation: 'horizontal',\n    safesearch: true,\n    page: page,\n    per_page: perPage,\n  });\n  try {\n    const response = await axios.get(`${BASE_URL}?${params}`);\n    return response.data;\n  } catch (error) {\n    console.error(error);\n  }\n}\n","import iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\nimport SimpleLightbox from 'simplelightbox';\nimport 'simplelightbox/dist/simple-lightbox.min.css';\n\nconst loaderBtn = document.querySelector('.loader-btn');\nconst loadMoreBtn = document.querySelector('.load-more');\nlet lightbox;\n\nexport function renderCard(hits, gallery) {\n  const markup = hits.map(hit => createGalleryCard(hit)).join('');\n  gallery.insertAdjacentHTML('beforeend', markup);\n  if (lightbox) {\n    lightbox.refresh();\n  } else {\n    lightbox = new SimpleLightbox('.gallery a');\n  }\n}\n\nfunction createGalleryCard({\n  webformatURL,\n  largeImageURL,\n  tags,\n  likes,\n  views,\n  comments,\n  downloads,\n}) {\n  return `\n    <a class=\"gallery-item\" href=\"${largeImageURL}\">\n      <img src=\"${webformatURL}\" alt=\"${tags}\" loading=\"lazy\" />\n      <div class=\"info\">\n        <p><span>Likes:</span> ${likes}</p>\n        <p><span>Views:</span> ${views}</p>\n        <p><span>Comments:</span> ${comments}</p>\n        <p><span>Downloads:</span> ${downloads}</p>\n      </div>\n    </a>\n  `;\n}\n\nexport function clearGallery(gallery) {\n  gallery.innerHTML = '';\n}\n\nexport function showErrorMessage(message) {\n  iziToast.error({\n    message: message,\n    messageColor: '#fff',\n    position: 'topRight',\n    backgroundColor: '#5b8cd1',\n  });\n}\n\nexport function showLoadingIndicator() {\n  const loader = document.createElement('div');\n  loader.className = 'loader';\n  document.body.appendChild(loader);\n}\n\nexport function hideLoadingIndicator() {\n  const loader = document.querySelector('.loader');\n  if (loader) {\n    document.body.removeChild(loader);\n  }\n}\n\nexport function showLoadMoreBtn() {\n  loadMoreBtn.classList.remove('hidden');\n}\n\nexport function hideLoadMoreBtn() {\n  loadMoreBtn.classList.add('hidden');\n}\n\nexport function showLoadingIndicatorBtn() {\n  loaderBtn.classList.remove('hidden');\n}\n\nexport function hideLoadingIndicatorBtn() {\n  loaderBtn.classList.add('hidden');\n}\n","// main.js\nimport { fetchImg } from './js/pixabay-api.js';\nimport {\n  renderCard,\n  showErrorMessage,\n  showLoadingIndicator,\n  hideLoadingIndicator,\n  clearGallery,\n  showLoadMoreBtn,\n  hideLoadMoreBtn,\n  showLoadingIndicatorBtn,\n  hideLoadingIndicatorBtn,\n} from './js/render-functions.js';\n\nconst searchForm = document.querySelector('form');\nconst gallery = document.querySelector('.gallery');\nconst loadMoreBtn = document.querySelector('.load-more');\n\nlet searchQuery = '';\nlet page = 1;\nlet totalHits = 0;\n\nsearchForm.addEventListener('submit', onSearch);\nloadMoreBtn.addEventListener('click', onLoadMore);\n\nfunction onSearch(e) {\n  e.preventDefault();\n  hideLoadMoreBtn();\n  clearGallery(gallery);\n\n  const form = e.currentTarget;\n  searchQuery = form.elements.query.value.trim();\n  page = 1;\n\n  if (searchQuery === '') {\n    showErrorMessage('Please enter a search query.');\n    return;\n  }\n\n  showLoadingIndicator();\n\n  fetchImg(searchQuery, page)\n    .then(data => {\n      hideLoadingIndicator();\n\n      if (data.hits.length === 0) {\n        showErrorMessage(\n          'Sorry, there are no images matching your search query. Please try again!'\n        );\n        return;\n      }\n\n      totalHits = data.totalHits;\n\n      renderCard(data.hits, gallery);\n\n      if (data.hits.length < 15 || gallery.children.length >= totalHits) {\n        showEndOfResultsMessage();\n      } else {\n        showLoadMoreBtn();\n      }\n    })\n    .catch(error => {\n      console.log(error);\n      showErrorMessage('Failed to fetch images. Please try again later.');\n    });\n\n  e.currentTarget.reset();\n}\n\nfunction onLoadMore() {\n  page += 1;\n  showLoadingIndicatorBtn();\n  fetchImg(searchQuery, page)\n    .then(data => {\n      hideLoadingIndicator();\n      renderCard(data.hits, gallery);\n      hideLoadingIndicatorBtn();\n\n      if (gallery.children.length >= totalHits) {\n        hideLoadMoreBtn();\n        showEndOfResultsMessage();\n      }\n\n      smoothScroll();\n    })\n    .catch(error => {\n      hideLoadingIndicator();\n      console.log(error);\n      showErrorMessage('Failed to fetch images. Please try again later.');\n    });\n}\n\nfunction smoothScroll() {\n  const { height: cardHeight } =\n    gallery.firstElementChild.getBoundingClientRect();\n  window.scrollBy({\n    top: cardHeight * 2,\n    behavior: 'smooth',\n  });\n}\n"],"names":["API_KEY","BASE_URL","fetchImg","searchQuery","page","perPage","params","axios","error","loaderBtn","loadMoreBtn","lightbox","renderCard","hits","gallery","markup","hit","createGalleryCard","SimpleLightbox","webformatURL","largeImageURL","tags","likes","views","comments","downloads","clearGallery","showErrorMessage","message","iziToast","showLoadingIndicator","loader","hideLoadingIndicator","showLoadMoreBtn","hideLoadMoreBtn","showLoadingIndicatorBtn","hideLoadingIndicatorBtn","searchForm","totalHits","onSearch","onLoadMore","data","smoothScroll","cardHeight"],"mappings":"owBAEA,MAAMA,EAAU,qCACVC,EAAW,2BAEV,eAAeC,EAASC,EAAaC,EAAO,EAAGC,EAAU,GAAI,CAClE,MAAMC,EAAS,IAAI,gBAAgB,CACjC,IAAKN,EACL,EAAGG,EACH,WAAY,QACZ,YAAa,aACb,WAAY,GACZ,KAAMC,EACN,SAAUC,CACd,CAAG,EACD,GAAI,CAEF,OADiB,MAAME,EAAM,IAAI,GAAGN,CAAQ,IAAIK,CAAM,EAAE,GACxC,IACjB,OAAQE,EAAO,CACd,QAAQ,MAAMA,CAAK,CACpB,CACH,CChBA,MAAMC,EAAY,SAAS,cAAc,aAAa,EAChDC,EAAc,SAAS,cAAc,YAAY,EACvD,IAAIC,EAEG,SAASC,EAAWC,EAAMC,EAAS,CACxC,MAAMC,EAASF,EAAK,IAAIG,GAAOC,EAAkBD,CAAG,CAAC,EAAE,KAAK,EAAE,EAC9DF,EAAQ,mBAAmB,YAAaC,CAAM,EAC1CJ,EACFA,EAAS,QAAO,EAEhBA,EAAW,IAAIO,EAAe,YAAY,CAE9C,CAEA,SAASD,EAAkB,CACzB,aAAAE,EACA,cAAAC,EACA,KAAAC,EACA,MAAAC,EACA,MAAAC,EACA,SAAAC,EACA,UAAAC,CACF,EAAG,CACD,MAAO;AAAA,oCAC2BL,CAAa;AAAA,kBAC/BD,CAAY,UAAUE,CAAI;AAAA;AAAA,iCAEXC,CAAK;AAAA,iCACLC,CAAK;AAAA,oCACFC,CAAQ;AAAA,qCACPC,CAAS;AAAA;AAAA;AAAA,GAI9C,CAEO,SAASC,EAAaZ,EAAS,CACpCA,EAAQ,UAAY,EACtB,CAEO,SAASa,EAAiBC,EAAS,CACxCC,EAAS,MAAM,CACb,QAASD,EACT,aAAc,OACd,SAAU,WACV,gBAAiB,SACrB,CAAG,CACH,CAEO,SAASE,GAAuB,CACrC,MAAMC,EAAS,SAAS,cAAc,KAAK,EAC3CA,EAAO,UAAY,SACnB,SAAS,KAAK,YAAYA,CAAM,CAClC,CAEO,SAASC,GAAuB,CACrC,MAAMD,EAAS,SAAS,cAAc,SAAS,EAC3CA,GACF,SAAS,KAAK,YAAYA,CAAM,CAEpC,CAEO,SAASE,GAAkB,CAChCvB,EAAY,UAAU,OAAO,QAAQ,CACvC,CAEO,SAASwB,GAAkB,CAChCxB,EAAY,UAAU,IAAI,QAAQ,CACpC,CAEO,SAASyB,GAA0B,CACxC1B,EAAU,UAAU,OAAO,QAAQ,CACrC,CAEO,SAAS2B,GAA0B,CACxC3B,EAAU,UAAU,IAAI,QAAQ,CAClC,CCnEA,MAAM4B,EAAa,SAAS,cAAc,MAAM,EAC1CvB,EAAU,SAAS,cAAc,UAAU,EAC3CJ,EAAc,SAAS,cAAc,YAAY,EAEvD,IAAIP,EAAc,GACdC,EAAO,EACPkC,EAAY,EAEhBD,EAAW,iBAAiB,SAAUE,CAAQ,EAC9C7B,EAAY,iBAAiB,QAAS8B,CAAU,EAEhD,SAASD,EAAS,EAAG,CASnB,GARA,EAAE,eAAc,EAChBL,IACAR,EAAaZ,CAAO,EAGpBX,EADa,EAAE,cACI,SAAS,MAAM,MAAM,KAAI,EAC5CC,EAAO,EAEHD,IAAgB,GAAI,CACtBwB,EAAiB,8BAA8B,EAC/C,MACD,CAEDG,IAEA5B,EAASC,EAAaC,CAAI,EACvB,KAAKqC,GAAQ,CAGZ,GAFAT,IAEIS,EAAK,KAAK,SAAW,EAAG,CAC1Bd,EACE,0EACV,EACQ,MACD,CAEDW,EAAYG,EAAK,UAEjB7B,EAAW6B,EAAK,KAAM3B,CAAO,EAEzB2B,EAAK,KAAK,OAAS,IAAM3B,EAAQ,SAAS,QAAUwB,EACtD,0BAEAL,GAER,CAAK,EACA,MAAMzB,GAAS,CACd,QAAQ,IAAIA,CAAK,EACjBmB,EAAiB,iDAAiD,CACxE,CAAK,EAEH,EAAE,cAAc,OAClB,CAEA,SAASa,GAAa,CACpBpC,GAAQ,EACR+B,IACAjC,EAASC,EAAaC,CAAI,EACvB,KAAKqC,GAAQ,CACZT,IACApB,EAAW6B,EAAK,KAAM3B,CAAO,EAC7BsB,IAEItB,EAAQ,SAAS,QAAUwB,IAC7BJ,IACA,2BAGFQ,GACN,CAAK,EACA,MAAMlC,GAAS,CACdwB,IACA,QAAQ,IAAIxB,CAAK,EACjBmB,EAAiB,iDAAiD,CACxE,CAAK,CACL,CAEA,SAASe,GAAe,CACtB,KAAM,CAAE,OAAQC,CAAY,EAC1B7B,EAAQ,kBAAkB,wBAC5B,OAAO,SAAS,CACd,IAAK6B,EAAa,EAClB,SAAU,QACd,CAAG,CACH"}